#!/usr/bin/env bash

# Update package lists and install Nginx
sudo apt update
sudo apt install nginx -y

# Define the redirection configuration file
config_file="/etc/nginx/sites-available/redirect_me"

# Create a new server block configuration for redirection
sudo tee "$config_file" > /dev/null <<EOF
server {
    listen 80;
    server_name _;  # Respond to any host

    location /redirect_me {
        return 301 https://example.com/new-page;  # Modify the URL as needed
    }

    # Redirect all other requests to the default Nginx page or your website
    location / {
        try_files \$uri \$uri/ =404;
    }
}
EOF

# Create a symbolic link to enable the server block
sudo ln -s "$config_file" "/etc/nginx/sites-enabled/"

# Test Nginx configuration for syntax errors
sudo nginx -t

# Reload Nginx to apply changes
sudo systemctl reload nginx
